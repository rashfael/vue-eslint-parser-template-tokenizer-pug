// AUTOGENERATED FROM https://github.com/vuejs/eslint-plugin-vue/blob/8f094200664a2b10bc597016f5486066a174e098/tests/lib/rules/html-self-closing.js @2022-03-19T13:08:36.622Z
/**
 * @author Toru Nagashima
 * @copyright 2016 Toru Nagashima. All rights reserved.
 * See LICENSE file in root directory for full license.
 */
'use strict'

// ------------------------------------------------------------------------------
// Requirements
// ------------------------------------------------------------------------------

const path = require('path')
const rule = require('../../fixtures/eslint-plugin-vue/lib/rules/html-self-closing')
const RuleTester = require('eslint').RuleTester

// ------------------------------------------------------------------------------
// Tests
// ------------------------------------------------------------------------------

const tester = new RuleTester({
  parser: require.resolve('vue-eslint-parser')
})

const ALL_CODE = `<template lang="pug">
div
div
img
img
x-test
x-test
svg
  path
svg
  path
math
  mspace
math
  mspace
</template>`

const anyWith = (opts) =>
  Object.assign(
    {
      svg: 'any',
      math: 'any'
    },
    opts,
    {
      html: Object.assign(
        {
          normal: 'any',
          void: 'any',
          component: 'any'
        },
        opts.html || {}
      )
    }
  )

tester.run('html-self-closing', rule, {
  valid: [
    // default
    `<template lang="pug">div</template>`,
    `<template lang="pug">img</template>`,
    `<template lang="pug">x-test</template>`,
    `<template lang="pug">
svg
  path
</template>`,
    `<template lang="pug">
math
  mspace
</template>`,

    // Don't error if there are comments in their content.
    {
      code: `<template lang="pug">
div
  // comment
</template>`,
      output: null,
      options: [{ html: { normal: 'always' } }]
    },

    // Invalid EOF
    `<!-- CONVERT ERROR -->Unexpected EOF in tag.<template><div a=">test</div></template>`,
    `<!-- CONVERT ERROR -->Unexpected EOF in comment.<template><div><!--test</div></template>`,

    // https://github.com/vuejs/eslint-plugin-vue/issues/1403
    {
      code: `
      <template>
        <div>
          <p>
            <Address
              value=""
              onchange="await setTokenAddress(event.target.value)"/>
          </p>
        </div>
      </template>
      `,
      filename: 'test.vue'
    }

    // other cases are in `invalid` tests.
  ],
  invalid: [
    // default
    {
      code: `<template lang="pug">div</template>`,
      output: `<template lang="pug">div</template>`,
      errors: ['Require self-closing on HTML elements (<div>).']
    },
    {
      code: `<template lang="pug">img</template>`,
      output: `<template lang="pug">img</template>`,
      errors: ['Disallow self-closing on HTML void elements (<img/>).']
    },
    {
      code: `<template lang="pug">x-test</template>`,
      output: `<template lang="pug">x-test</template>`,
      errors: ['Require self-closing on Vue.js custom components (<x-test>).']
    },
    {
      code: `<template lang="pug">
svg
  path
</template>`,
      output: `<template lang="pug">
svg
  path
</template>`,
      errors: ['Require self-closing on SVG elements (<path>).']
    },
    {
      code: `<template lang="pug">
math
  mspace
</template>`,
      output: `<template lang="pug">
math
  mspace
</template>`,
      errors: ['Require self-closing on MathML elements (<mspace>).']
    },

    // others
    {
      code: ALL_CODE,
      output: `<template lang="pug">
div
div
img
img
x-test
x-test
svg
  path
svg
  path
math
  mspace
math
  mspace
</template>`,
      options: [anyWith({ html: { normal: 'always' } })],
      errors: [
        { message: 'Require self-closing on HTML elements (<div>).', line: 2 }
      ]
    },
    {
      code: ALL_CODE,
      output: `<template lang="pug">
div
div
img
img
x-test
x-test
svg
  path
svg
  path
math
  mspace
math
  mspace
</template>`,
      options: [anyWith({ html: { normal: 'never' } })],
      errors: [
        { message: 'Disallow self-closing on HTML elements (<div/>).', line: 3 }
      ]
    },
    {
      code: ALL_CODE,
      output: `<template lang="pug">
div
div
img
img
x-test
x-test
svg
  path
svg
  path
math
  mspace
math
  mspace
</template>`,
      options: [anyWith({ html: { void: 'always' } })],
      errors: [
        {
          message: 'Require self-closing on HTML void elements (<img>).',
          line: 4
        }
      ]
    },
    {
      code: ALL_CODE,
      output: `<template lang="pug">
div
div
img
img
x-test
x-test
svg
  path
svg
  path
math
  mspace
math
  mspace
</template>`,
      options: [anyWith({ html: { void: 'never' } })],
      errors: [
        {
          message: 'Disallow self-closing on HTML void elements (<img/>).',
          line: 5
        }
      ]
    },
    {
      code: ALL_CODE,
      output: `<template lang="pug">
div
div
img
img
x-test
x-test
svg
  path
svg
  path
math
  mspace
math
  mspace
</template>`,
      options: [anyWith({ html: { component: 'always' } })],
      errors: [
        {
          message:
            'Require self-closing on Vue.js custom components (<x-test>).',
          line: 6
        }
      ]
    },
    {
      code: ALL_CODE,
      output: `<template lang="pug">
div
div
img
img
x-test
x-test
svg
  path
svg
  path
math
  mspace
math
  mspace
</template>`,
      options: [anyWith({ html: { component: 'never' } })],
      errors: [
        {
          message:
            'Disallow self-closing on Vue.js custom components (<x-test/>).',
          line: 7
        }
      ]
    },
    {
      code: ALL_CODE,
      output: `<template lang="pug">
div
div
img
img
x-test
x-test
svg
  path
svg
  path
math
  mspace
math
  mspace
</template>`,
      options: [anyWith({ svg: 'always' })],
      errors: [
        { message: 'Require self-closing on SVG elements (<path>).', line: 8 }
      ]
    },
    {
      code: ALL_CODE,
      output: `<template lang="pug">
div
div
img
img
x-test
x-test
svg
  path
svg
  path
math
  mspace
math
  mspace
</template>`,
      options: [anyWith({ svg: 'never' })],
      errors: [
        { message: 'Disallow self-closing on SVG elements (<path/>).', line: 9 }
      ]
    },
    {
      code: ALL_CODE,
      output: `<template lang="pug">
div
div
img
img
x-test
x-test
svg
  path
svg
  path
math
  mspace
math
  mspace
</template>`,
      options: [anyWith({ math: 'always' })],
      errors: [
        {
          message: 'Require self-closing on MathML elements (<mspace>).',
          line: 10
        }
      ]
    },
    {
      code: ALL_CODE,
      output: `<template lang="pug">
div
div
img
img
x-test
x-test
svg
  path
svg
  path
math
  mspace
math
  mspace
</template>`,
      options: [anyWith({ math: 'never' })],
      errors: [
        {
          message: 'Disallow self-closing on MathML elements (<mspace/>).',
          line: 11
        }
      ]
    }
  ]
})
